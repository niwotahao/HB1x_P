/********************************************************************************************************
*FileName:	main.c
*Processor: PIC18F67J11+AT86RF212
*Complier:	MCC18 | HI-TECH18
*Company:   WWW.OURZIGBEE.COM
*********************************************************************************************************
*Author			Date				Comment
*NIWOTA			2010/8/28			Original
*NIWOTA			2010/9/13			 丰利源
********************************************************************************************************/
#ifndef _HAL_KEY_H_
#define _HAL_KEY_H_
/********************************************************************************************************
*											
********************************************************************************************************/ 
#include <ioCC2530.h>
#include "hal_types.h"
#include "eBsp.h"
/********************************************************************************************************
*											常量宏定义
********************************************************************************************************/  
    /**< P0.1 P0.2 P0.3*/
    #define KEY_PORT_INIT()             {P0SEL &= ~(0x0E); P0DIR &= ~(0x0E);P0INP &= ~(0x0E);P2INP &= ~(0x20);}

	#define KEY_PORT()					(P0&0x0E)

	#define KEY_INT_DISABLE()			{P0IEN &= ~0x0E;}
	#define KEY_INT_ENABLE()			{IEN1 |= 0x20;P0IEN |= 0x0E;PICTL |= 0x01;}/**< 下降沿触发中断 */
/********************************************************************************************************
*											常量宏定义
********************************************************************************************************/  
    #define LONG_KEY_MARK               (0X80)

    #define KEY_NO                      (0x0E)

    #define KEY_OPEN                    (0x06)
    #define KEY_REPLY                	(0x0a)
    #define KEY_NEXT                    (0x0c)
    
    #define KEY_OPEN_REPLY           	(0x02)
    #define KEY_REPLY_NEXT             	(0x08)
    #define KEY_OPEN_NEXT               (0x04)
    
    #define KEY_OPEN_REPLY_NEXT        	(0x00)

    #define KEY_LONG_OPEN               (0x06|LONG_KEY_MARK)
    #define KEY_LONG_REPLY             	(0x0a|LONG_KEY_MARK)
    #define KEY_LONG_NEXT              	(0x0c|LONG_KEY_MARK)
    
    #define KEY_LONG_OPEN_REPLY        	(0x02|LONG_KEY_MARK)
    #define KEY_LONG_REPLY_NEXT       	(0x08|LONG_KEY_MARK)
    #define KEY_LONG_OPEN_NEXT        	(0x04|LONG_KEY_MARK)
    
    #define KEY_LONG_OPEN_REPLY_NEXT 	(0x00|LONG_KEY_MARK)
/********************************************************************************************************
*											常量宏定义
********************************************************************************************************/  

#define FIRST_LONG_KEY_CNT		200
#define NEXT_LONG_KEY_CNT		30
#define SHORT_KEY_CNT			4
/********************************************************************************************************
*											外部使用变量
********************************************************************************************************/  

/********************************************************************************************************
*											按键函数申明
********************************************************************************************************/  
extern void KEY_Init(void);
extern BspEvent_t KEY_Read(void);
/********************************************************************************************************
*											    结束
********************************************************************************************************/
#endif
